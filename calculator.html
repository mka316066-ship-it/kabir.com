<!DOCTYPE html>
<html lang="ha">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculator</title>
  <style>
    :root{
      --bg: purple;
      --panel: #0b2340;
      --btn: #e6e6e6;
      --accent: #ffd166;
      --text: #fff;
    }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--bg);
      font-family:system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;
      color:var(--text);
    }

    .calculator{
      width:320px;
      background:var(--panel);
      border-radius:12px;
      padding:18px;
      box-shadow:0 8px 20px rgba(0,0,0,0.4);
      border:3px solid rgba(255,255,255,0.08);
    }

    .display{
      width:100%;
      height:56px;
      font-size:24px;
      padding:8px 12px;
      border-radius:8px;
      border:none;
      outline:none;
      box-sizing:border-box;
      margin-bottom:12px;
      background:transparent;
      color:var(--text);
      text-align:right;
    }

    .buttons{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }

    .btn{
      height:48px;
      border-radius:8px;
      border:none;
      font-size:18px;
      cursor:pointer;
      background:var(--btn);
      color:#111;
      box-shadow:0 2px 6px rgba(0,0,0,0.2);
      user-select:none;
    }

    .btn:active{ transform:translateY(1px); }

    .btn.operator{
      background:var(--accent);
      color:#111;
      font-weight:600;
    }

    .btn.span-2{
      grid-column: span 2;
    }

    /* responsive */
    @media (max-width:360px){
      .calculator{ width:92%; }
      .display{ font-size:20px; height:48px; }
    }
  </style>
</head>
<body>
  <div class="calculator">
    <!-- single unique id for the display -->
    <input id="display" class="display" type="text" readonly aria-label="calculator display">

    <div class="buttons">
      <!-- use class="btn" for repeated button elements -->
      <button class="btn" data-value="7">7</button>
      <button class="btn" data-value="8">8</button>
      <button class="btn" data-value="9">9</button>
      <button class="btn operator" data-value="/">÷</button>

      <button class="btn" data-value="4">4</button>
      <button class="btn" data-value="5">5</button>
      <button class="btn" data-value="6">6</button>
      <button class="btn operator" data-value="*">×</button>

      <button class="btn" data-value="1">1</button>
      <button class="btn" data-value="2">2</button>
      <button class="btn" data-value="3">3</button>
      <button class="btn operator" data-value="-">−</button>

      <button class="btn" data-value="0">0</button>
      <button class="btn" data-value=".">.</button>
      <button class="btn" id="del">Delete</button>
      <button class="btn operator" data-value="+">+</button>

      <button class="btn span-2" id="clear">C</button>
      <button class="btn span-2" id="equals">=</button>
    </div>
  </div>

  <script>
    // References
    const display = document.getElementById('display');
    const buttons = document.querySelectorAll('.btn');

    // Keep the expression in a string
    let expr = '';

    // helper: update display
    function updateDisplay(){
      display.value = expr;
    }

    // click handler
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const v = btn.getAttribute('data-value');

        if (btn.id === 'clear') {
          expr = '';
          updateDisplay();
          return;
        }
        if (btn.id === 'del') {
          expr = expr.slice(0, -1);
          updateDisplay();
          return;
        }
        if (btn.id === 'equals') {
          evaluateExpression();
          return;
        }

        // append value (digits/operators)
        expr += v;
        updateDisplay();
      });
    });

    // Evaluate safely: allow only digits, operators, dot, parentheses and spaces
    function evaluateExpression(){
      // simple validation — reject if any disallowed chars present
      const safeRe = /^[0-9+\-*/().\s]+$/;
      if (!safeRe.test(expr) || expr.trim() === '') {
        display.value = 'Error';
        expr = '';
        return;
      }
      try {
        // Use Function instead of eval (slightly safer here)
        // still be cautious: this is for local demo calculators only
        const result = Function('"use strict"; return (' + expr + ')')();
        expr = String(result);
        updateDisplay();
      } catch (e) {
        display.value = 'Error';
        expr = '';
      }
    }

    // Optional: keyboard support
    window.addEventListener('keydown', (ev) => {
      const allowed = '0123456789+-*/().';
      if (allowed.includes(ev.key)) {
        expr += ev.key;
        updateDisplay();
        ev.preventDefault();
      } else if (ev.key === 'Enter') {
        evaluateExpression();
        ev.preventDefault();
      } else if (ev.key === 'Backspace') {
        expr = expr.slice(0,-1);
        updateDisplay();
        ev.preventDefault();
      } else if (ev.key.toLowerCase() === 'c') {
        expr = '';
        updateDisplay();
        ev.preventDefault();
      }
    });
  </script>
</body>
</html>
